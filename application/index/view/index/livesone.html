<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>livesOne</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <link href="" rel="stylesheet">
</head>

<body style="text-align: center;">
    <h1>livesOne</h1>
    <div id="time"></div>
    <p>自动刷新倒计时</p>
    <h2 id="dj"></h2>
    <p>随机数</p>
    <h3 id="string"></h3>
</body>
<script type="text/javascript">
var max = 100000,
    min = 10000,
    value = parseInt(Math.random() * (max - min + 1) + min, 10),
    url = window.location.pathname + '?spm=' + value;

function AutoRun() {
    window.location.replace(url);
};
document.getElementById('string').innerHTML = value;
setTimeout("AutoRun()", value);

function run() {
    var time = new Date(); //获取系统当前时间
    var year = time.getFullYear();
    var month = time.getMonth() + 1;
    var date = time.getDate(); //系统时间月份中的日
    var day = time.getDay(); //系统时间中的星期值
    var weeks = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
    var week = weeks[day]; //显示为星期几
    var hour = time.getHours();
    var minutes = time.getMinutes();
    var seconds = time.getSeconds();
    // console.log(seconds);
    if (month < 10) {
        month = "0" + month;
    }
    if (date < 10) {
        date = "0" + date;
    }
    if (hour < 10) {
        hour = "0" + hour;
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    if (seconds < 10) {
        seconds = "0" + seconds;
    }
    var _html = '<p>' + year + "年" + month + "月" + date + "日 " + week + '</p><h2>' + hour + ":" + minutes + ":" + seconds + '</h2>';
    document.getElementById("time").innerHTML = _html;
    setTimeout('run()', 1000);
}

run();

// console.log( "时间:"+Math.floor(value/60)+"分"+(value-Math.floor(value/60)*60)+"秒");
// console.log(value / 1000);

// dianji(value);

function dianji(value) {
    var num = value/10;
    // num = value/100;

    // var name = setInterval(function() {
    //         // $("#" + id).html(num); // 你倒计时显示的地方元素
    //         num--;
    //         if (num == 0) {
    //             clearInterval(name);
    //         }
    //     }
    //     document.getElementById('dj').innerHTML = num;
    // }, 1000);
    var name = setInterval(function(){
    	num --;
    	if(num < 0){
    		clearInterval(name);
    	}else{
    		document.getElementById('dj').innerHTML = (num/100).toFixed(2);
    	}
    },10);
}


var addTimer = function() {
    var list = [],
        interval;

    return function(id, timeStamp) {
        if (!interval) {
            interval = setInterval(go, 1);
        }
        list.push({ ele: document.getElementById(id), time: timeStamp });
    }

    function go() {
        for (var i = 0; i < list.length; i++) {
            list[i].ele.innerHTML = changeTimeStamp(list[i].time);
            if (!list[i].time)
                list.splice(i--, 1);
        }
    }

    //传入unix时间戳，得到倒计时
    function changeTimeStamp(timeStamp) {
        // var distancetime = new Date(timeStamp * 1000).getTime() - new Date().getTime();
        var distancetime = timeStamp - new Date().getTime();
        if (distancetime > 0) {　　　　　　　　　　　　　　 //如果大于0.说明尚未到达截止时间       
            var ms = Math.floor(distancetime % 1000);
            var sec = Math.floor(distancetime / 1000 % 60);
            var min = Math.floor(distancetime / 1000 / 60 % 60);
            var hour = Math.floor(distancetime / 1000 / 60 / 60 % 24);
            var day = Math.floor(distancetime / 1000 / 60 / 60 / 24 );
            // console.log(day);

            ms = ms.toString().replace(/\b(0+)/gi,''); // 去掉前面的 0 
            
            var ms_length = ms.toString().length; // 取得长度
            if(ms_length == 0){
                ms == '000';
            }else if( ms_length == 1){
                ms = '00' + ms;
            }else if( ms_length == 2){
                ms = '0' + ms;
            }

            if (sec < 10) {
                sec = '0' + sec;
            }
            if (min < 10) {
                min = '0' + min;
            }
            if (hour < 10) {
                hour = '0' + hour;
            }
            if (day < 10) {
                day = '0' + day;
            }
            return day + ':' + hour + ':' + min + ':' + sec + ':' + ms;
        } else {　　　　　　　　　　　　　　 //若否，就是已经到截止时间了
            return "正在刷新……"
        }
    }
}();

addTimer('dj', new Date().getTime() + value); //1月5日00点，unix时间戳自己去百度一下，就有的

// var dd = Math.round(new Date().getTime()/1000);
// console.log(dd);
// getTime();
</script>

</html>